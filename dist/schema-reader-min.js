!function(){var e={},i={};Object.defineProperty(i,"__esModule",{value:!0});var a=function(e,t,i,a){this.type="SchemaReader",this.connection=e,this.isFetching=!0,this.batchSize="undefined"==typeof t?100:t,this.skipErrors="undefined"==typeof a,this.readRelWithUdefNames=!1,"function"==typeof i&&this.populate(i,a)};a.prototype={populate:function(e,t){this.preMetas=[],this.completeMetas={},this.nameBatches=[];var i=0,a=this.connection.describeGlobal();this.preMetas=a.getArray("sobjects");for(var s=0;s<this.preMetas.length;){for(var n=[],o=0;s<this.preMetas.length&&o<this.batchSize;s++,o++)n.push(this.preMetas[s].name);this.nameBatches.push(n)}for(var r=!1,h=!1,l=this,d=function(a){if(!h){if(r)return console.log(a),t(a),void(h=!0);i--,console.log(i),i<=0&&(l.isFetching=!1,e())}},f=function(e){l.skipErrors?console.log(e):(r=!0,t(e)),d(e)},s=0;s<this.nameBatches.length;s++)console.log("Batch : "+this.nameBatches[s]),i++,this.fetchCompleteMeta(this.nameBatches[s],d,f)},fetchCompleteMeta:function(e,t,i){var a=this,s=function(e){try{for(var s=0;s<e.length;s++)a.registerMeta(e[s])}catch(e){i(e)}finally{t()}};this.connection.describeSObjects(e,s,i)},registerMeta:function(e){this.completeMetas[e.name]=e},shallowReadFields:function(e){this.validateState();for(var t in this.completeMetas)if("term"===this.shallowReadMetaFieldsAbr(this.completeMetas[t],e))return"term"},shallowReadMetaFields:function(e,t,i,a){if(this.validateState(),"undefined"==typeof e.fields)return void console.log("The object has no fields defined");for(var s=0;s<e.fields.length;s++){var n=e.fields[s];if("undefined"!=typeof n){var o=i.slice(0);if(o.push(n),"term"===a(n,e,o,this))return"term"}}},shallowReadMetaFieldsAbr:function(e,t){var i={};return i[e.name]=!0,this.shallowReadMetaFields(e,i,[e],t)},deepReadFields:function(e){this.validateState();for(var t in this.completeMetas)if("term"===this.deepReadMetaFieldsAbr(this.completeMetas[t],e))return"term"},deepReadMetaFields:function(e,i,a,s){if(this.validateState(),1!=i[e.name]&&"undefined"!=typeof e.fields){i[e.name]=!0,0==a.length&&a.push(e);for(var n=0;n<e.fields.length;n++){var o=e.fields[n];if("undefined"!=typeof o){var r=a.slice(0);if(r.push(o),"term"===s(o,e,r,this))return"term";if("reference"===t.type&&"term"===this.deepReadMetaFields(this.completeMetas[o.referenceTo],i,r,s))return"term"}}if("undefined"!=typeof e.childRelationships)for(var n=0;n<e.childRelationships.length;n++){var h=e.childRelationships[n];if(this.readRelWithUdefNames||"undefined"!=typeof h.relationshipName){var r=a.slice(0);if(r.push(h),"term"===this.deepReadMetaFields(this.completeMetas[h.childSObject],i,r,s))return"term"}}}},deepReadMetaFieldsAbr:function(e,t){return this.deepReadMetaFields(e,[],[],t)},shallowReadChildRelationships:function(e){this.validateState();for(var t in this.completeMetas)if("term"===this.shallowReadMetaChildRelationshipsAbr(this.completeMetas[t],e))return"term"},shallowReadMetaChildRelationships:function(e,t,i,a){if(this.validateState(),"undefined"==typeof e.childRelationships)return void console.log("The object has no child relationships defined");for(var s=0;s<e.childRelationships.length;s++){var n=e.childRelationships[s];if("undefined"!=typeof n){var o=i.slice(0);if(o.push(n),"term"===a(n,e,o,this))return"term"}}},shallowReadMetaChildRelationshipsAbr:function(e,t){var i={};return i[e.name]=!0,this.shallowReadMetaChildRelationships(e,i,[e],t)},validateState:function(){if(this.isFetching)throw this.type+" hasn't finished fetching metadata from the server"},createFilterVisitor:function(e,t){return function(i,a,s,n){e(i,a,s,n)&&t(i,a,s,n)}},newObjectNameFilter:function(e,t,i){return function(a,s,n,o){(!i&&e.toLowerCase()===s.name.toLowerCase()||i&&e===s.name)&&t(a,s,n,o)}},newFieldNameFilter:function(e,t,i){return function(a,s,n,o){(!i&&e.toLowerCase()===a.name.toLowerCase()||i&&e===a.name)&&t(a,s,n,o)}},newObjectAndFieldNameFilter:function(e,t,i,a){return function(s,n,o,r){(!a&&e.toLowerCase()===s.name.toLowerCase()||a&&e===s.name)&&(!a&&t.toLowerCase()===n.name.toLowerCase()||a&&t===n.name)&&i(s,n,o,r)}}},i.default=a,e.exports=i.default,window.SchemaReader=a}();
//# sourceMappingURL=schema-reader-min.map