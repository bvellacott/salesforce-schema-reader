!function(){var e={},i={};Object.defineProperty(i,"__esModule",{value:!0});var s=function(e,t,i,s){(void 0).type="SchemaReader",(void 0).connection=e,(void 0).isFetching=!0,(void 0).batchSize="undefined"==typeof t?100:t,(void 0).skipErrors="undefined"==typeof s,(void 0).readRelWithUdefNames=!1,"function"==typeof i&&(void 0).populate(i,s)};s.prototype={populate:function(e,t){this.preMetas=[],this.completeMetas={},this.nameBatches=[];var i=0,s=this.connection.describeGlobal();this.preMetas=s.getArray("sobjects");for(var a=0;a<this.preMetas.length;){for(var n=[],o=0;a<this.preMetas.length&&o<this.batchSize;a++,o++)n.push(this.preMetas[a].name);this.nameBatches.push(n)}for(var h=!1,r=!1,l=this,d=function(s){if(!r){if(h)return console.log(s),t(s),void(r=!0);i--,console.log(i),i<=0&&(l.isFetching=!1,e())}},f=function(e){l.skipErrors?console.log(e):(h=!0,t(e)),d(e)},a=0;a<this.nameBatches.length;a++)console.log("Batch : "+this.nameBatches[a]),i++,this.fetchCompleteMeta(this.nameBatches[a],d,f)},fetchCompleteMeta:function(e,t,i){var s=this,a=function(e){try{for(var a=0;a<e.length;a++)s.registerMeta(e[a])}catch(e){i(e)}finally{t()}};this.connection.describeSObjects(e,a,i)},registerMeta:function(e){this.completeMetas[e.name]=e},shallowReadFields:function(e){this.validateState();for(var t in this.completeMetas)if("term"===this.shallowReadMetaFieldsAbr(this.completeMetas[t],e))return"term"},shallowReadMetaFields:function(e,t,i,s){if(this.validateState(),"undefined"==typeof e.fields)return void console.log("The object has no fields defined");for(var a=0;a<e.fields.length;a++){var n=e.fields[a];if("undefined"!=typeof n){var o=i.slice(0);if(o.push(n),"term"===s.visit(n,e,o,this))return"term"}}},shallowReadMetaFieldsAbr:function(e,t){var i={};return i[e.name]=!0,this.shallowReadMetaFields(e,i,[e],t)},deepReadFields:function(e){this.validateState();for(var t in this.completeMetas)if("term"===this.deepReadMetaFieldsAbr(this.completeMetas[t],e))return"term"},deepReadMetaFields:function(e,i,s,a){if(this.validateState(),1!=i[e.name]&&"undefined"!=typeof e.fields){i[e.name]=!0,0==s.length&&s.push(e);for(var n=0;n<e.fields.length;n++){var o=e.fields[n];if("undefined"!=typeof o){var h=s.slice(0);if(h.push(o),"term"===a.visit(o,e,h,this))return"term";if("reference"===t.type&&"term"===this.deepReadMetaFields(this.completeMetas[o.referenceTo],i,h,a))return"term"}}if("undefined"!=typeof e.childRelationships)for(var n=0;n<e.childRelationships.length;n++){var r=e.childRelationships[n];if(this.readRelWithUdefNames||"undefined"!=typeof r.relationshipName){var h=s.slice(0);if(h.push(r),"term"===this.deepReadMetaFields(this.completeMetas[r.childSObject],i,h,a))return"term"}}}},deepReadMetaFieldsAbr:function(e,t){return this.deepReadMetaFields(e,[],[],t)},shallowReadChildRelationships:function(e){this.validateState();for(var t in this.completeMetas)if("term"===this.shallowReadMetaChildRelationshipsAbr(this.completeMetas[t],e))return"term"},shallowReadMetaChildRelationships:function(e,t,i,s){if(this.validateState(),"undefined"==typeof e.childRelationships)return void console.log("The object has no child relationships defined");for(var a=0;a<e.childRelationships.length;a++){var n=e.childRelationships[a];if("undefined"!=typeof n){var o=i.slice(0);if(o.push(n),"term"===s.visit(n,e,o,this))return"term"}}},shallowReadMetaChildRelationshipsAbr:function(e,t){var i={};return i[e.name]=!0,this.shallowReadMetaChildRelationships(e,i,[e],t)},validateState:function(){if(this.isFetching)throw this.type+" hasn't finished fetching metadata from the server"}},i.default=s,e.exports=i.default,window.SchemaReader=s}();
//# sourceMappingURL=schema-reader-min.map